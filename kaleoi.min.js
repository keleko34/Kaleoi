window.__KaleoiExtensions__={config:{},components:{}};
window.kaleoi=function(){function r(a,b,c){if(!b||"object"!==typeof b)throw c="function"===typeof c?" Function::"+(c.name||c.toString().replace(T,"$2")||c.toString()):"",Error(b+" does not match the [prop, value] or {prop:value} format"+c+" on component "+a.title);return!0}function U(a){var b=V(),c=["solone","czosnek","frytki","pikantny","peprze"].filter(function(a){a:{var b=document.querySelectorAll("script"),c=b.len,d=0;for(d;d<c;d++)if(-1!==b[d].src.indexOf(a)){a=!0;break a}a=!1}return!a}),d=[],
e=c.length,g=0;e||a();for(g;g<e;g++){var f=document.createElement("script");f.setAttribute("src",b+"/"+c[g]+"/"+c[g]+".js");f.setAttribute("type","text/javascript");f.setAttribute("title",c[g]);f.onload=function(){if("solone"===this.title)solone.init(function(){d.push(1);if(d.length===e)return a()});else if(d.push(1),d.length===e)return a()};f.onerror=function(a){console.error("ERR! Script "+b+"/"+c[g]+"/"+c[g]+".js failed to load",a)};document.head.appendChild(f)}}function K(a,b){var c=document.createElement("script");
c.title=a;c.type="text/javascript";c.textContent=b;document.head.appendChild(c);return c}function D(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);b&&Object.keys(b).forEach(function(a){e.setRequestHeader(a,b[a])});e.onreadystatechange=function(){4===e.readyState&&(200===e.status?c(e.responseText):d(Error(e.status)))};e.send()})}function V(){var a=document.querySelectorAll("script"),b=a.len,c=0;for(c;c<b;c++)if(-1!==a[c].src.indexOf("kaleoi"))return a[c].src.substring(0,
a[c].src.indexOf("/kaleoi"));return"/node_modules"}function E(a){var b=__KaleoiExtensions__.config;Object.keys(a).forEach(function(c){b[c]&&"object"===typeof b[c]?b[c].length?b[c].concat(b[c]):Object.keys(b[c]).forEach(function(d){b[c][d]=a[c][d]}):b[c]=a[c]})}function W(){var a=__KaleoiExtensions__.config.prefix||"";return Promise.all([D("/node_modules/kaleoi/config.js"),D(a+"/config.js"),D(a+"/auth-client.js")]).then(function(a,c,d){var b=K("config_setup","");d=K("auth",d);b.textContent=a.replace("module.exports",
"\r\nvar node_config")+c.replace("module.exports","\r\nvar local_config");E(node_config);E(local_config);local_config=node_config=null;document.head.removeChild(b);document.head.removeChild(d)}).catch(function(){console.error("Failed to fetch configs",arguments)})}function v(a){return a.split(".").pop()}function m(a,b,c,d){return{value:a,writable:!!b,enumerable:!!c,configurable:!!d}}function y(a,b){var c=Object.keys(b),d=c.length,e=0;for(e;e<d;e++)a[c[e]]=b[c[e]];return a}function L(a,b){var c=Object.keys(b),
d=c.length,e=0;for(e;e<d;e++)"function"===typeof b[c[e]]&&(b[c[e]]=b[c[e]].bind(a));return b}function X(a){var b=Object.keys(a),c=b.length,d=0;for(d;d<c;d++)a.isObservable(a,b[d])||a.set(b[d],a[b[d]],!0);return a}function M(a){a=a.toString();var b=a.match(N),c=a.match(O),d=[];if(b){b=b[0].replace(N,"$2");var e=new RegExp("($variable.(.*?)([s;\x3d]))".replace("$variable",b),"g");d=a.match(e).map(function(a){return a.replace(e,"$2")})}return c?c.map(function(a){return a.replace(O,"$2")}).concat(d):
[]}function Y(a,b){w[a]||(w[a]=[]);w[a].push(b);F[a]&&b(F[a]);return x}function Z(a,b){if(a=w[a]){var c=a.length,d=0;for(d;d<c;d++)if(a[d]===b){a.splice(d,1);break}}return x}function aa(a,b){var c=w[a];if(c){var d=c.length,e=0;for(e;e<d;e++)c[e](b)}F[a]=b;return x}function G(a,b,c){(a="model"!==a?window[a+"Storage"].getItem(b):z.get(b))&&y(c,"string"===typeof a?JSON.parse(a):a);return c}function H(a,b,c){window[a+"Storage"].setItem(b,JSON.stringify(c));return c}function ba(a,b){var c=Object.keys(b),
d=c.length,e=0;for(e;e<d;e++)a[c[e]]=b[c[e]];return a}function ca(a,b){function c(a,c,g){Object.defineProperties(this,{sessionStorage:m(!1,!0),localStorage:m(!1,!0),store:m(!1,!0),multiple:m(!1,!0),filters:m(y({},I.filters)),innerHTML:m(c||"",!0),component:m(a,!0),onfinish:m(function(){},!0),__frytkiExtensions__:m(frytki().__frytkiExtensions__,!0)});b.apply(this,arguments);this.filters=L(this,this.filters);this.localStorage&&(G("local",this.name,this),this.addEventListener("*update",function(){H("local",
this.name,this)}.bind(this)));this.sessionStorage&&(G("session",this.name,this),this.addEventListener("*update",function(){H("session",this.name,this)}.bind(this)));this.store&&(G("model",this.name,this),this.addEventListener("*update",function(){H("model",this.name,this)}.bind(this)));g&&ba(this,g);L(this,this);return X(this)}c.prototype=frytki();c.prototype=y(c.prototype,b.prototype);c.prototype.name=a;c.prototype.listen=Y;c.prototype.unlisten=Z;c.prototype.alert=aa;return c}function P(a){var b=
!!A[a];return solone(a).then(function(c){var d=c.prototype.__extensionsHTML__,e=c.prototype.__extensionsCSS__;b||(A[a]=ca(a,c));czosnek.register(a,d,e);return A[a]}).catch(function(){throw Error("ERR! Failed to retrieve component "+a);})}function da(a){a=a.map(function(a){return P(a)});return Promise.all(a)}function ea(a){var b=[],c=a.length,d=0;for(d;d<c;d++){var e=a[d].nodeName.toLowerCase();czosnek.isRegistered(e)||b.push(e)}return b}function Q(a){var b=czosnek.getUnknown(a),c=ea(b),d=b.length,
e=0;if(c.length)da(c).then(function(){for(e;e<d;e++)B(b[e])}).catch(function(a){console.error("Failed to fetch components: ",c,a)});else if(b.length)for(e;e<d;e++)B(b[e])}function B(a){var b=a.nodeName.toLowerCase(),c=new czosnek(b),d=c.maps,e=fa.call(a.attributes),g={},f=e.length,h=0;for(h;h<f;h++)g[e[h].name]=e[h].value;e=c.component;f=new A[b](e,a.childNodes,g);h=d.length;var k=0;Object.defineProperty(e,"__KaleoiExtensions__",m({title:b,vm:f,params:g,root:e}));a.parentElement&&a.parentElement.replaceChild(e,
a);for(k;k<h;k++)R(d[k],f);if(f.onfinish)f.onfinish();Q(e);return c}function t(a,b,c){var d=b.length,e=0;for(e;e<d;e++)a=c[b[e]]?c[b[e]](a):a;return a}function R(a,b){var c=ha.indexOf(a.type);var d=a.key,e=a.filters,g=e.model.length&&"model"||e.session.length&&"session"||e.local.length&&"local",f=-1!==["local","session"].indexOf(g)?g+"Storage":g,h=f&&("model"!==f?window[f].getItem(e[g][0]):z.get(d));g&&(void 0!==h?b.set(d,"string"===typeof h?JSON.parse(h):h):"model"!==g?window[f].setItem(e[g],b.get(d)):
z.set(e[g],b.get(d)));a.value=b.get(a.key);if(a.mapValues&&a.mapValues.length)for(d=a.mapValues.length,e=0,e;e<d;e++)R(a.mapValues[e],b);if(!a.value)return!!console.error("Component: "+b.name,Error("You are missing the viewmodel property of "+a.key));"function"===typeof a.value&&(a.value=a.value.bind(b));"object"===typeof a.value&&(a.value=y(a.value,{}));a.stop=a.local&&a.local.stop?a.local.stop.bind(a.local):a.node.stop.bind(a.node);if(!a.isPropertyValue)switch(c){case 0:c=b.findLayer(a.key);d=v(a.key);
a.local[a.localAttr]=l(a.mapText,b);a.isInsert||(a.datalistener=ia(a,b,c,d),a.datafunctionlistener=ja(a,b,c,d),a.domlistener=ka(a,b,c,d),a.domfunctionlistener=la(a,b,c,d),"function"===typeof a.value?(c.addEventListener(d,a.datafunctionlistener),a.isDirty||a.node.addEventListener(a.listener,a.domfunctionlistener)):(c.addEventListener(d,a.datalistener),a.isDirty||a.node.addEventListener(a.listener,a.domlistener)));break;case 1:return S(a,b);case 2:c=b.findLayer(a.key),d=v(a.key),a.local[a.localAttr]=
u(a.mapText,b),a.isInsert||(a.isFullStyle?(a.datalistener=ma(a,b,c,d),a.datafunctionlistener=na(a,b,c,d),"function"!==typeof a.value&&q(a,b,c,d)):a.isFullProp?(a.datalistener=oa(a,b,c,d),a.datafunctionlistener=pa(a,b,c,d),"function"!==typeof a.value&&q(a,b,c,d)):a.isProperty?(a.datalistener=qa(a,b,c,d),a.datafunctionlistener=ra(a,b,c,d)):(a.datalistener=sa(a,b,c,d),a.datafunctionlistener=ta(a,b,c,d)),"function"===typeof a.value?c.addEventListener(d,a.datafunctionlistener):c.addEventListener(d+"update",
a.datalistener))}}function J(a,b,c,d){if("string"===typeof a){if(-1!==a.indexOf(":"))return a;if(c)return a+":"+c+(d&&-1!==d.indexOf(";")?"":";")}else if(a&&"object"===typeof a){var e=Object.keys(a)[0];if(void 0!==c){if(a.length)return a[0]+":"+c+(d&&-1!==d.indexOf(";")?"":";");if(e)return e+":"+c+(d&&-1!==d.indexOf(";")?"":";")}else{if(2===a.length)return a[0]+":"+a[1]+(d&&-1!==d.indexOf(";")?"":";");if(e)return e+":"+a[e]+(d&&-1!==d.indexOf(";")?"":";")}}return r(b,a,J)}function k(a,b,c){var d=
M(c),e=d.length,g=0;a.subfunctionlistener||(a.subfunctionlistener=ua(a,b));for(g;g<e;g++){c=b.findLayer(d[g]);var f=v(d[g]);c.addEventListener(f,a.subfunctionlistener)}}function n(a,b,c){var d=M(c),e=d.length,g=0;for(g;g<e;g++){c=b.findLayer(d[g]);var f=v(d[g]);c.removeEventListener(f,a.datalistener)}}function ua(a,b){return function(c){c.value=a.value;return a.datafunctionlistener.call(b,c)}}function q(a,b,c,d){c=c[d];d=Object.keys(c);var e=0,g=d.length;a.subdatalistener||(a.subdatalistener=va(a,
b));for(e;e<g;e++)c.addEventListener(d[e],a.subdatalistener)}function C(a,b,c,d){b=c[d];c=Object.keys(b);d=0;var e=c.length;for(d;d<e;d++)b.removeEventListener(c[d],a.subdatalistener)}function va(a,b){return function(c){c.value=a.value;c.subchange=!0;return a["function"===typeof a.value?"datafunctionlistener":"datalistener"].call(b,c)}}function l(a,b){var c="",d=b.filters,e=0,g=a.length;for(e;e<g;e++)if(b=a[e],"string"===typeof b)c+=b;else if(void 0!==b.value){var f=t("function"===typeof b.value?
b.value():b.value,b.filters.filters,d);c+=f;b.isInsert&&(b.mapText[e]=f,b.maps[b.mapIndex]=f)}return c}function ia(a,b,c,d){return function(e){"function"===typeof e.value?(c.removeEventListener(d+"update",a.datalistener),a.isDirty||a.node.removeEventListener(a.localAttr+"update",a.domlistener),a.value=e.value.bind(b),c.addEventListener(d,a.datafunctionlistener),k(a,b,a.value),a.stop()[a.localAttr]=l(a.mapText,b),a.isDirty||a.node.addEventListener(a.localAttr,a.domfunctionlistener)):(a.value=e.value,
a.stop()[a.localAttr]=l(a.mapText,b))}}function ja(a,b,c,d){return function(e){"function"!==typeof e.value?(n(a,b,a.value),c.removeEventListener(d,a.datafunctionlistener),a.isDirty||a.node.removeEventListener(a.localAttr,a.domfunctionlistener),c.addEventListener(d+"update",a.datalistener),a.value=e.value,a.stop()[a.localAttr]=l(a.mapText,b),a.isDirty||a.node.addEventListener(a.localAttr+"update",a.domlistener)):(n(a,b,a.value),a.value=e.value.bind(b),k(a,b,a.value),a.stop()[a.localAttr]=l(a.mapText,
b))}}function ka(a,b,c,d){return function(e){"function"===typeof e.value?(c.removeEventListener(d+"update",a.datalistener),a.node.removeEventListener(a.localAttr+"update",a.domlistener),a.value=e.value.bind(b),c.stop()[d]=a.value,c.addEventListener(d,a.datafunctionlistener),k(a,b,a.value),a.stop()[a.localAttr]=l(a.mapText,b),a.node.addEventListener(a.localAttr,a.domfunctionlistener)):(a.value=e.value,c.stop()[d]=a.value)}}function la(a,b,c,d){return function(e){if(e.stopped)return e.srcElement.__pikantnyExtensions__.stop=
void 0;"function"!==typeof e.value?(n(a,b,a.value),c.removeEventListener(d,a.datafunctionlistener),a.node.removeEventListener(a.localAttr,a.domfunctionlistener),a.value=e.value,c.stop()[d]=a.value,c.addEventListener(d+"update",a.datalistener),a.node.addEventListener(a.localAttr,a.domlistener)):(e.preventDefault(),n(a,b,a.value),a.value=e.value.bind(b),c.stop()[d]=a.value,k(a,b,a.value),a.stop()[a.localAttr]=l(a.mapText,b))}}function S(a,b){var c=b.findLayer(a.key),d=v(a.key);if("function"!==typeof c[d])return r(b,
c[d],S);a.node[a.property]=a.value;a.insert||(a.datalistener=wa(a,b,c,d),a.domlistener=xa(a,b,c,d),c.addEventListener(d,a.datalistener),a.node.addEventListener(a.property,a.domlistener))}function wa(a,b,c,d){return function f(g){if("function"!==typeof g.value)return g.preventDefault(),r(b,c[d],f);a.value=g.value.bind(b);a.node.stop()[a.property]=a.value}}function xa(a,b,c,d){return function f(g){if("function"!==typeof g.value)return g.preventDefault(),r(b,c[d],f);a.value=g.value.bind(b);c.stop()[d]=
a.value}}function u(a,b){var c="",d=b.filters,e=0,g=a.length;for(e;e<g;e++){var f=a[e];if("string"===typeof f)c+=f;else if(f.value){if(f.isFullStyle){var h=t("function"===typeof f.value?f.value():f.value,f.filters.filters,d);if(!h||"object"!==typeof h)return r(b,h,u);h=JSON.stringify(h,null,2).replace(/[{}"]/g,"");c+=h}else if(f.isFullProp)h=t("function"===typeof f.value?f.value():f.value,f.filters.filters,d),h=J(h,b,void 0,a[e+1]),c+=h||"";else if(f.isProperty){var k=f.values,m="",n=b.filters,l=
0,q=k.length;for(l;l<q;l++){var p=k[l];"string"===typeof p?m+=p:(h=t("function"===typeof p.value?p.value():p.value,p.filters.filters,n),m+=h,p.isInsert&&(p.mapText[l]=h,p.maps[p.mapIndex]=h))}p=m;h=t("function"===typeof f.value?f.value(p):f.value,f.filters.filters,d);h=J(h,b,p,a[e+1]);c+=h||""}else h=t("function"===typeof f.value?f.value():f.value,f.filters.filters,d),c+=h;f.isInsert&&(f.mapText[e]=h,f.maps[f.mapIndex]=h)}}return c}function sa(a,b,c,d){return function(e){"function"===typeof e.value?
(c.removeEventListener(d+"update",a.datalistener),a.value=e.value.bind(b),c.addEventListener(d,a.datafunctionlistener),k(a,b,a.value)):a.value=e.value;a.stop()[a.localAttr]=u(a.mapText,b)}}function ta(a,b,c,d){return function(e){"function"!==typeof e.value?(n(a,b,a.value),c.removeEventListener(d,a.datafunctionlistener),c.addEventListener(d+"update",a.datalistener),a.value=e.value):(n(a,b,a.value),a.value=e.value.bind(b),k(a,b,a.value));a.stop()[a.localAttr]=l(a.mapText,b)}}function ma(a,b,c,d){return function f(g){if("function"===
typeof g.value)c.removeEventListener(d+"update",a.datalistener),C(a,b,c,d),a.value=g.value.bind(b),c.addEventListener(d,a.datafunctionlistener),k(a,b,a.value);else{if("object"!==typeof g.value)return r(b,g.value,f);g.subchange||C(a,b,c,d);a.value=g.value;g.subchange||q(a,b,c,d)}a.stop()[a.localAttr]=u(a.mapText,b)}}function na(a,b,c,d){return function(e){"function"!==typeof e.value?(n(a,b,a.value),c.removeEventListener(d,a.datafunctionlistener),q(a,b,c,d),c.addEventListener(d+"update",a.datalistener),
a.value=e.value):(n(a,b,a.value),a.value=e.value.bind(b),k(a,b,a.value));a.stop()[a.localAttr]=l(a.mapText,b)}}function oa(a,b,c,d){return function(e){"function"===typeof e.value?(c.removeEventListener(d+"update",a.datalistener),C(a,b,c,d),a.value=e.value.bind(b),c.addEventListener(d,a.datafunctionlistener),k(a,b,a.value)):(e.subchange||C(a,b,c,d),a.value=e.value,e.subchange||q(a,b,c,d));a.stop()[a.localAttr]=u(a.mapText,b)}}function pa(a,b,c,d){return function(e){"function"!==typeof e.value?(n(a,
b,a.value),c.removeEventListener(d,a.datafunctionlistener),q(a,b,c,d),c.addEventListener(d+"update",a.datalistener),a.value=e.value):(n(a,b,a.value),a.value=e.value.bind(b),k(a,b,a.value));a.stop()[a.localAttr]=l(a.mapText,b)}}function qa(a,b,c,d){return function(e){"function"===typeof e.value?(c.removeEventListener(d+"update",a.datalistener),a.value=e.value.bind(b),c.addEventListener(d,a.datafunctionlistener),k(a,b,a.value)):a.value=e.value;a.stop()[a.localAttr]=u(a.mapText,b)}}function ra(a,b,c,
d){return function(e){"function"!==typeof e.value?(n(a,b,a.value),c.removeEventListener(d,a.datafunctionlistener),c.addEventListener(d+"update",a.datalistener),a.value=e.value):(n(a,b,a.value),a.value=e.value.bind(b),k(a,b,a.value));a.stop()[a.localAttr]=l(a.mapText,b)}}function x(a){return U(function(){W().then(function(){a&&E(a);solone.useBackend=!!I.backendRouting;solone.prefix(I.prefix);z=__KaleoiExtensions__.model=frytki(__KaleoiExtensions__.model);Q(document.body)}).catch(function(){throw Error("ERR! Failed constructor");
})})}var I=__KaleoiExtensions__.config,A=__KaleoiExtensions__.components,z=__KaleoiExtensions__.model,fa=Array.prototype.slice,ha="standard event stylesheet style attr loop node pointer".split(" ");Object.keys(HTMLElement.prototype).filter(function(a){return 0===a.indexOf("on")}).concat("onDOMContentLoaded onDOMAttributeNameChanged onDOMAttrModified onDOMCharacterDataModified onDOMNodeInserted onDOMNodeRemoved onDOMSubtreeModified".split(" ")).map(function(a){return a.toLowerCase()});var N=/(var[\s+]?(.*?)[\s+]?=[\s+]?this([;]?))/g,
O=/(this\.(.*?)([\s;=]))/g,T=/^(function)\s?(.*?)\((.[\r\n]*?)+$/,F={},w={};Object.defineProperties(x,{createComponent:m(function(a){var b=a.nodeName.toLowerCase();return new Promise(function(c,d){czosnek.isRegistered(b)?c(B(a).component):P(b).then(function(){return B(a)}).then(function(a){c(a.component)}).catch(function(a){console.error("Failed to fetch component: ",b,a);d()})})}),removeComponent:m(function(a){a.__CzosnekRoot__.destruct();a.parentElement.removeChild(a)})});return x}();