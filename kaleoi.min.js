window.__KaleoiExtensions__={config:{},components:{}};
window.kaleoi=function(){function r(a,b,c){if(!b||"object"!==typeof b)throw c="function"===typeof c?" Function::"+(c.name||c.toString().replace(V,"$2")||c.toString()):"",Error(b+" does not match the [prop, value] or {prop:value} format"+c+" on component "+a.title);return!0}function W(a){var b=X(),c=["solone","czosnek","frytki","pikantny","peprze"].filter(function(a){a:{var b=document.querySelectorAll("script"),c=b.len,d=0;for(d;d<c;d++)if(-1!==b[d].src.indexOf(a)){a=!0;break a}a=!1}return!a}),e=[],
d=c.length,f=0;d||a();for(f;f<d;f++){var g=document.createElement("script");g.setAttribute("src",b+"/"+c[f]+"/"+c[f]+".js");g.setAttribute("type","text/javascript");g.setAttribute("title",c[f]);g.onload=function(){if("solone"===this.title)solone.init(function(){e.push(1);if(e.length===d)return a()});else if(e.push(1),e.length===d)return a()};g.onerror=function(a){console.error("ERR! Script "+b+"/"+c[f]+"/init.js failed to load",a)};document.head.appendChild(g)}}function N(a,b){var c=document.createElement("script");
c.title=a;c.type="text/javascript";c.textContent=b;document.head.appendChild(c);return c}function F(a,b){return new Promise(function(c,e){var d=new XMLHttpRequest;d.open("GET",a,!0);b&&Object.keys(b).forEach(function(a){d.setRequestHeader(a,b[a])});d.onreadystatechange=function(){4===d.readyState&&(200===d.status?c(d.responseText):e(Error(d.status)))};d.send()})}function X(){var a=document.querySelectorAll("script"),b=a.len,c=0;for(c;c<b;c++)if(-1!==a[c].src.indexOf("kaleoi"))return a[c].src.substring(0,
a[c].src.indexOf("/kaleoi"));return"/node_modules"}function G(a){var b=__KaleoiExtensions__.config;Object.keys(a).forEach(function(c){b[c]&&"object"===typeof b[c]?b[c].length?b[c].concat(b[c]):Object.keys(b[c]).forEach(function(e){b[c][e]=a[c][e]}):b[c]=a[c]})}function Y(){var a=__KaleoiExtensions__.config.prefix||"";return Promise.all([F("/node_modules/kaleoi/config.js"),F(a+"/config.js"),F(a+"/auth-client.js")]).then(function(a,c,e){var b=N("config_setup","");e=N("auth",e);b.textContent=a.replace("module.exports",
"\r\nvar node_config")+c.replace("module.exports","\r\nvar local_config");G(node_config);G(local_config);local_config=node_config=null;document.head.removeChild(b);document.head.removeChild(e)}).catch(function(){console.error("Failed to fetch configs",arguments)})}function x(a){return a.split(".").pop()}function n(a,b,c,e){return{value:a,writable:!!b,enumerable:!!c,configurable:!!e}}function A(a,b){var c=Object.keys(b),e=c.length,d=0;for(d;d<e;d++)a[c[d]]=b[c[d]];return a}function O(a,b){var c=Object.keys(b),
e=c.length,d=0;for(d;d<e;d++)"function"===typeof b[c[d]]&&(b[c[d]]=b[c[d]].bind(a));return b}function Z(a){var b=Object.keys(a),c=b.length,e=0;for(e;e<c;e++)a.isObservable(a,b[e])||a.set(b[e],a[b[e]],!0);return a}function P(a){a=a.toString();var b=a.match(Q),c=a.match(R),e=[];if(b){b=b[0].replace(Q,"$2");var d=new RegExp("($variable.(.*?)([s;\x3d]))".replace("$variable",b),"g");e=a.match(d).map(function(a){return a.replace(d,"$2")})}return c?c.map(function(a){return a.replace(R,"$2")}).concat(e):
[]}function aa(a,b){y[a]||(y[a]=[]);y[a].push(b);H[a]&&b(H[a]);return z}function ba(a,b){if(a=y[a]){var c=a.length,e=0;for(e;e<c;e++)if(a[e]===b){a.splice(e,1);break}}return z}function ca(a,b){var c=y[a];if(c){var e=c.length,d=0;for(d;d<e;d++)c[d](b)}H[a]=b;return z}function I(a,b,c){(a="model"!==a?window[a+"Storage"].getItem(b):B.get(b))&&A(c,"string"===typeof a?JSON.parse(a):a);return c}function J(a,b,c){window[a+"Storage"].setItem(b,JSON.stringify(c));return c}function da(a,b){var c=Object.keys(b),
e=c.length,d=0;for(d;d<e;d++)a[c[d]]=b[c[d]];return a}function ea(a,b){function c(a,c,f){Object.defineProperties(this,{sessionStorage:n(!1,!0),localStorage:n(!1,!0),store:n(!1,!0),multiple:n(!1,!0),filters:n(A({},K.filters)),innerHTML:n(c||"",!0),component:n(a,!0),onfinish:n(function(){},!0),__frytkiExtensions__:n(frytki().__frytkiExtensions__,!0)});b.apply(this,arguments);this.filters=O(this,this.filters);this.localStorage&&(I("local",this.name,this),this.addEventListener("*update",function(){J("local",
this.name,this)}.bind(this)));this.sessionStorage&&(I("session",this.name,this),this.addEventListener("*update",function(){J("session",this.name,this)}.bind(this)));this.store&&(I("model",this.name,this),this.addEventListener("*update",function(){J("model",this.name,this)}.bind(this)));f&&da(this,f);O(this,this);return Z(this)}c.prototype=frytki();c.prototype=A(c.prototype,b.prototype);c.prototype.name=a;c.prototype.listen=aa;c.prototype.unlisten=ba;c.prototype.alert=ca;return c}function S(a){var b=
!!C[a];return solone(a).then(function(c){var e=c.prototype.__extensionsHTML__,d=c.prototype.__extensionsCSS__;b||(C[a]=ea(a,c));czosnek.register(a,e,d);return C[a]}).catch(function(){throw Error("ERR! Failed to retrieve component "+a);})}function fa(a){a=a.map(function(a){return S(a)});return Promise.all(a)}function ha(a){var b=[],c=a.length,e=0;for(e;e<c;e++){var d=a[e].nodeName.toLowerCase();czosnek.isRegistered(d)||b.push(d)}return b}function T(a){var b=czosnek.getUnknown(a),c=ha(b),e=b.length,
d=0;if(c.length)fa(c).then(function(){for(d;d<e;d++)D(b[d])}).catch(function(a){console.error("Failed to fetch components: ",c,a)});else if(b.length)for(d;d<e;d++)D(b[d])}function D(a){var b=a.nodeName.toLowerCase(),c=new czosnek(b),e=c.maps,d=ia.call(a.attributes),f={},g=d.length,h=0;for(h;h<g;h++)f[d[h].name]=d[h].value;d=c.component;g=new C[b](d,a.childNodes,f);h=e.length;var m=0;Object.defineProperty(d,"__KaleoiExtensions__",n({title:b,vm:g,params:f,root:d}));a.parentElement&&a.parentElement.replaceChild(d,
a);for(m;m<h;m++)a:{a=e[m];b=g;f=ja.indexOf(a.type);var k=a.key,l=a.filters,L=b,t=l.model.length&&"model"||l.session.length&&"session"||l.local.length&&"local",p=-1!==["local","session"].indexOf(t)?t+"Storage":t,r=p&&("model"!==p?window[p].getItem(l[t][0]):B.get(k));t&&(void 0!==r?L.set(k,"string"===typeof r?JSON.parse(r):r):"model"!==t?window[p].setItem(l[t],L.get(k)):B.set(l[t],L.get(k)));a.value=b.get(a.key);if(a.value)switch("function"===typeof a.value&&(a.value=a.value.bind(b)),"object"===typeof a.value&&
(a.value=A(a.value,{})),a.stop=a.local&&a.local.stop?a.local.stop.bind(a.local):a.node.stop.bind(a.node),f){case 0:f=b.findLayer(a.key);k=x(a.key);a.local[a.localAttr]=q(a.mapText,b);a.isInsert||(a.datalistener=ka(a,b,f,k),a.datafunctionlistener=la(a,b,f,k),a.domlistener=ma(a,b,f,k),a.domfunctionlistener=na(a,b,f,k),"function"===typeof a.value?(f.addEventListener(k,a.datafunctionlistener),a.isDirty||a.node.addEventListener(a.listener,a.domfunctionlistener)):(f.addEventListener(k,a.datalistener),a.isDirty||
a.node.addEventListener(a.listener,a.domlistener)));break;case 1:U(a,b);break a;case 2:f=b.findLayer(a.key),k=x(a.key),a.local[a.localAttr]=u(a.mapText,b),a.isInsert||(a.isFullStyle?(a.datalistener=oa(a,b,f,k),a.datafunctionlistener=pa(a,b,f,k),"function"!==typeof a.value&&v(a,b,f,k)):a.isFullProp?(a.datalistener=qa(a,b,f,k),a.datafunctionlistener=ra(a,b,f,k),"function"!==typeof a.value&&v(a,b,f,k)):a.isProp?(a.datalistener=sa(a,b,f,k),a.datafunctionlistener=ta(a,b,f,k)):(a.datalistener=ua(a,b,f,
k),a.datafunctionlistener=va(a,b,f,k)),"function"===typeof a.value?f.addEventListener(k,a.datafunctionlistener):f.addEventListener(k+"update",a.datalistener))}else console.error("Component: "+b.name,Error("You are missing the viewmodel property of "+a.key))}if(g.onfinish)g.onfinish();T(d);return c}function w(a,b,c){var e=b.length,d=0;for(d;d<e;d++)a=c[b[d]]?c[b[d]](a):a;return a}function M(a,b,c){if("string"===typeof a){if(-1!==a.indexOf(":"))return a;if(c)return[a,c]}else if(a&&"object"===typeof a){if(2===
a.length)return a[0]+":"+a[1]+";";b=Object.keys(a)[0];return b+":"+a[b]+";"}return r(b,a,M)}function m(a,b,c){var e=P(c),d=e.length,f=0;a.subfunctionlistener||(a.subfunctionlistener=wa(a,b));for(f;f<d;f++){c=b.findLayer(e[f]);var g=x(e[f]);c.addEventListener(g,a.subfunctionlistener)}}function l(a,b,c){var e=P(c),d=e.length,f=0;for(f;f<d;f++){c=b.findLayer(e[f]);var g=x(e[f]);c.removeEventListener(g,a.datalistener)}}function wa(a,b){return function(c){c.value=a.value;return a.datafunctionlistener.call(b,
c)}}function v(a,b,c,e){c=c[e];e=Object.keys(c);var d=0,f=e.length;a.subdatalistener||(a.subdatalistener=xa(a,b));for(d;d<f;d++)c.addEventListener(e[d],a.subdatalistener)}function E(a,b,c,e){b=c[e];c=Object.keys(b);e=0;var d=c.length;for(e;e<d;e++)b.removeEventListener(c[e],a.subdatalistener)}function xa(a,b){return function(c){c.value=a.value;c.subchange=!0;return a["function"===typeof a.value?"datafunctionlistener":"datalistener"].call(b,c)}}function q(a,b){var c="",e=b.filters,d=0,f=a.length;for(d;d<
f;d++)if(b=a[d],"string"===typeof b)c+=b;else if(void 0!==b.value){var g=w("function"===typeof b.value?b.value():b.value,b.filters.filters,e);c+=g;b.isInsert&&(b.mapText[d]=g,b.maps[b.mapIndex]=g)}return c}function ka(a,b,c,e){return function(d){"function"===typeof d.value?(c.removeEventListener(e+"update",a.datalistener),a.isDirty||a.node.removeEventListener(a.localAttr+"update",a.domlistener),a.value=d.value.bind(b),c.addEventListener(e,a.datafunctionlistener),m(a,b,a.value),a.stop()[a.localAttr]=
q(a.mapText,b),a.isDirty||a.node.addEventListener(a.localAttr,a.domfunctionlistener)):(a.value=d.value,a.stop()[a.localAttr]=q(a.mapText,b))}}function la(a,b,c,e){return function(d){"function"!==typeof d.value?(l(a,b,a.value),c.removeEventListener(e,a.datafunctionlistener),a.isDirty||a.node.removeEventListener(a.localAttr,a.domfunctionlistener),c.addEventListener(e+"update",a.datalistener),a.value=d.value,a.stop()[a.localAttr]=q(a.mapText,b),a.isDirty||a.node.addEventListener(a.localAttr+"update",
a.domlistener)):(l(a,b,a.value),a.value=d.value.bind(b),m(a,b,a.value),a.stop()[a.localAttr]=q(a.mapText,b))}}function ma(a,b,c,e){return function(d){"function"===typeof d.value?(c.removeEventListener(e+"update",a.datalistener),a.node.removeEventListener(a.localAttr+"update",a.domlistener),a.value=d.value.bind(b),c.stop()[e]=a.value,c.addEventListener(e,a.datafunctionlistener),m(a,b,a.value),a.stop()[a.localAttr]=q(a.mapText,b),a.node.addEventListener(a.localAttr,a.domfunctionlistener)):(a.value=
d.value,c.stop()[e]=a.value)}}function na(a,b,c,e){return function(d){if(d.stopped)return d.srcElement.__pikantnyExtensions__.stop=void 0;"function"!==typeof d.value?(l(a,b,a.value),c.removeEventListener(e,a.datafunctionlistener),a.node.removeEventListener(a.localAttr,a.domfunctionlistener),a.value=d.value,c.stop()[e]=a.value,c.addEventListener(e+"update",a.datalistener),a.node.addEventListener(a.localAttr,a.domlistener)):(d.preventDefault(),l(a,b,a.value),a.value=d.value.bind(b),c.stop()[e]=a.value,
m(a,b,a.value),a.stop()[a.localAttr]=q(a.mapText,b))}}function U(a,b){var c=b.findLayer(a.key),e=x(a.key);if("function"!==typeof c[e])return r(b,c[e],U);a.node[a.property]=a.value;a.insert||(a.datalistener=ya(a,b,c,e),a.domlistener=za(a,b,c,e),c.addEventListener(e,a.datalistener),a.node.addEventListener(a.property,a.domlistener))}function ya(a,b,c,e){return function g(f){if("function"!==typeof f.value)return f.preventDefault(),r(b,c[e],g);a.value=f.value.bind(b);a.node.stop()[a.property]=a.value}}
function za(a,b,c,e){return function g(f){if("function"!==typeof f.value)return f.preventDefault(),r(b,c[e],g);a.value=f.value.bind(b);c.stop()[e]=a.value}}function u(a,b){var c="",e=b.filters,d=0,f=a.length;for(d;d<f;d++){var g=a[d];if("string"===typeof g)c+=g;else if(g.value){if(g.isFullStyle){var h=w("function"===typeof g.value?g.value():g.value,g.filters.filters,e);if(!h||"object"!==typeof h)return r(b,h,u);h=JSON.stringify(h,null,2).replace(/[{}]/g,"");c+=h}else if(g.isFullProp)h=w("function"===
typeof g.value?g.value():g.value,g.filters.filters,e),h=M(h,b),c+=h||"";else if(g.isProp){var l=g.values,k="",m=b.filters,n=0,q=l.length;for(n;n<q;n++){var p=l[n];"string"===typeof p?k+=p:(h=w("function"===typeof p.value?p.value():p.value,p.filters.filters,m),k+=h,p.isInsert&&(p.mapText[n]=h,p.maps[p.mapIndex]=h))}p=k;h=w("function"===typeof g.value?g.value(p):g.value,g.filters.filters,e);h=M(h,b,p);c+=h||""}else h=w("function"===typeof g.value?g.value():g.value,g.filters.filters,e),c+=h;g.isInsert&&
(g.mapText[d]=h,g.maps[g.mapIndex]=h)}}return c}function ua(a,b,c,e){return function(d){"function"===typeof d.value?(c.removeEventListener(e+"update",a.datalistener),a.value=d.value.bind(b),c.addEventListener(e,a.datafunctionlistener),m(a,b,a.value)):a.value=d.value;a.stop()[a.localAttr]=u(a.mapText,b)}}function va(a,b,c,e){return function(d){"function"!==typeof d.value?(l(a,b,a.value),c.removeEventListener(e,a.datafunctionlistener),c.addEventListener(e+"update",a.datalistener),a.value=d.value):(l(a,
b,a.value),a.value=d.value.bind(b),m(a,b,a.value));a.stop()[a.localAttr]=q(a.mapText,b)}}function oa(a,b,c,e){return function g(f){if("function"===typeof f.value)c.removeEventListener(e+"update",a.datalistener),E(a,b,c,e),a.value=f.value.bind(b),c.addEventListener(e,a.datafunctionlistener),m(a,b,a.value);else{if("object"!==typeof f.value)return r(b,f.value,g);f.subchange||E(a,b,c,e);a.value=f.value;f.subchange||v(a,b,c,e)}a.stop()[a.localAttr]=u(a.mapText,b)}}function pa(a,b,c,e){return function(d){"function"!==
typeof d.value?(l(a,b,a.value),c.removeEventListener(e,a.datafunctionlistener),v(a,b,c,e),c.addEventListener(e+"update",a.datalistener),a.value=d.value):(l(a,b,a.value),a.value=d.value.bind(b),m(a,b,a.value));a.stop()[a.localAttr]=q(a.mapText,b)}}function qa(a,b,c,e){return function(d){"function"===typeof d.value?(c.removeEventListener(e+"update",a.datalistener),E(a,b,c,e),a.value=d.value.bind(b),c.addEventListener(e,a.datafunctionlistener),m(a,b,a.value)):(d.subchange||E(a,b,c,e),a.value=d.value,
d.subchange||v(a,b,c,e));a.stop()[a.localAttr]=u(a.mapText,b)}}function ra(a,b,c,e){return function(d){"function"!==typeof d.value?(l(a,b,a.value),c.removeEventListener(e,a.datafunctionlistener),v(a,b,c,e),c.addEventListener(e+"update",a.datalistener),a.value=d.value):(l(a,b,a.value),a.value=d.value.bind(b),m(a,b,a.value));a.stop()[a.localAttr]=q(a.mapText,b)}}function sa(a,b,c,e){return function(d){"function"===typeof d.value?(c.removeEventListener(e+"update",a.datalistener),a.value=d.value.bind(b),
c.addEventListener(e,a.datafunctionlistener),m(a,b,a.value)):a.value=d.value;a.stop()[a.localAttr]=u(a.mapText,b)}}function ta(a,b,c,e){return function(d){"function"!==typeof d.value?(l(a,b,a.value),c.removeEventListener(e,a.datafunctionlistener),c.addEventListener(e+"update",a.datalistener),a.value=d.value):(l(a,b,a.value),a.value=d.value.bind(b),m(a,b,a.value));a.stop()[a.localAttr]=q(a.mapText,b)}}function z(a){return W(function(){Y().then(function(){a&&G(a);solone.useBackend=!!K.backendRouting;
solone.prefix(K.prefix);B=__KaleoiExtensions__.model=frytki(__KaleoiExtensions__.model);T(document.body)}).catch(function(){throw Error("ERR! Failed constructor");})})}var K=__KaleoiExtensions__.config,C=__KaleoiExtensions__.components,B=__KaleoiExtensions__.model,ia=Array.prototype.slice,ja="standard event stylesheet style attr loop node pointer".split(" ");Object.keys(HTMLElement.prototype).filter(function(a){return 0===a.indexOf("on")}).concat("onDOMContentLoaded onDOMAttributeNameChanged onDOMAttrModified onDOMCharacterDataModified onDOMNodeInserted onDOMNodeRemoved onDOMSubtreeModified".split(" ")).map(function(a){return a.toLowerCase()});
var Q=/(var[\s+]?(.*?)[\s+]?=[\s+]?this([;]?))/g,R=/(this\.(.*?)([\s;=]))/g,V=/^(function)\s?(.*?)\((.[\r\n]*?)+$/,H={},y={};Object.defineProperties(z,{createComponent:n(function(a){var b=a.nodeName.toLowerCase();return new Promise(function(c,e){czosnek.isRegistered(b)?c(D(a).component):S(b).then(function(){return D(a)}).then(function(a){c(a.component)}).catch(function(a){console.error("Failed to fetch component: ",b,a);e()})})}),removeComponent:n(function(a){a.__CzosnekRoot__.destruct();a.parentElement.removeChild(a)})});
return z}();